# 场景题

### 1、我有8G的内存，和一个800TB的文件，每一行会有一行文字；我想在有限的内存资源内对这个800TB的数据文件进行一个去重的排序，该怎么做？

将800TB的数据文件放入8GB的内存是不现实的。因此，需要采用外部排序（External Sort）算法，它是一种基于磁盘的排序算法，可在内存有限的情况下对大量数据进行排序。

外部排序的基本思路是：将大文件分成若干个能够在内存中处理的小块，每一块都可以在内存中进行排序。将排序后的小块合并成一个更大的有序块，重复这个过程，直到所有的小块都被合并成一个大块。在这个过程中，我们需要使用一个额外的缓存区来存储中间结果。具体步骤如下：

1. 将800TB的数据文件划分成若干个小文件，每个小文件的大小为内存大小的一小部分（例如，每个小文件大小为1GB）。
2. 读取一个小文件到内存中，对其进行排序。
3. 将排序后的结果写入一个临时文件中，这个文件可以存放在磁盘上。
4. 重复步骤2和步骤3，直到所有小文件都被处理完成。
5. 将所有临时文件按照顺序合并成一个大文件。
6. 对大文件进行去重和排序操作。
7. 将结果存储在一个新文件中。

需要注意的是，在实际的实现过程中，还需要考虑一些细节问题，例如如何处理相同的元素、如何处理小文件中重复的元素等等。